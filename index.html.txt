// 1. Array Soal (10 Soal)
const questions = [
    {
        question: "Berapakah jumlah benua di dunia?",
        answers: [
            { text: "5", correct: false },
            { text: "6", correct: false },
            { text: "7", correct: true },
            { text: "4", correct: false },
        ]
    },
    {
        question: "Apa nama planet terdekat dengan Matahari?",
        answers: [
            { text: "Mars", correct: false },
            { text: "Venus", correct: false },
            { text: "Merkurius", correct: true },
            { text: "Bumi", correct: false },
        ]
    },
    {
        question: "Apa ibu kota negara Jepang?",
        answers: [
            { text: "Seoul", correct: false },
            { text: "Tokyo", correct: true },
            { text: "Beijing", correct: false },
            { text: "Bangkok", correct: false },
        ]
    },
    {
        question: "Siapakah penemu bola lampu pijar?",
        answers: [
            { text: "Nikola Tesla", correct: false },
            { text: "Albert Einstein", correct: false },
            { text: "Thomas Edison", correct: true },
            { text: "Galileo Galilei", correct: false },
        ]
    },
    {
        question: "Warna apa yang dihasilkan dari pencampuran warna biru dan kuning?",
        answers: [
            { text: "Ungu", correct: false },
            { text: "Merah", correct: false },
            { text: "Hijau", correct: true },
            { text: "Cokelat", correct: false },
        ]
    },
    {
        question: "Apa satuan mata uang negara Korea Selatan?",
        answers: [
            { text: "Yen", correct: false },
            { text: "Yuan", correct: false },
            { text: "Won", correct: true },
            { text: "Baht", correct: false },
        ]
    },
    {
        question: "Tahun berapa Indonesia memproklamasikan kemerdekaannya?",
        answers: [
            { text: "1940", correct: false },
            { text: "1945", correct: true },
            { text: "1950", correct: false },
            { text: "1942", correct: false },
        ]
    },
    {
        question: "Gas yang paling melimpah di atmosfer bumi adalah...",
        answers: [
            { text: "Oksigen", correct: false },
            { text: "Nitrogen", correct: true },
            { text: "Karbon Dioksida", correct: false },
            { text: "Argon", correct: false },
        ]
    },
    {
        question: "Hewan mamalia terbesar di dunia adalah...",
        answers: [
            { text: "Gajah Afrika", correct: false },
            { text: "Paus Biru", correct: true },
            { text: "Badak Putih", correct: false },
            { text: "Jerapah", correct: false },
        ]
    },
    {
        question: "Organ tubuh yang berfungsi memompa darah adalah...",
        answers: [
            { text: "Paru-paru", correct: false },
            { text: "Ginjal", correct: false },
            { text: "Jantung", correct: true },
            { text: "Hati", correct: false },
        ]
    },
];

// 2. Variabel DOM dan State
const questionElement = document.getElementById("question");
const answerButtons = document.getElementById("answer-buttons");
const nextButton = document.getElementById("next-btn");
const quizBox = document.getElementById("quiz-box");
const resultBox = document.getElementById("result-box");
const scoreText = document.getElementById("score-text");
const restartButton = document.getElementById("restart-btn");

let currentQuestionIndex = 0;
let score = 0;

// 3. Fungsi Utama: Memulai Kuis
function startQuiz() {
    currentQuestionIndex = 0;
    score = 0;
    quizBox.classList.remove("hide");
    resultBox.classList.add("hide");
    nextButton.innerHTML = "Selanjutnya";
    showQuestion();
}

// 4. Fungsi Menampilkan Soal
function showQuestion() {
    resetState();
    let currentQuestion = questions[currentQuestionIndex];
    let questionNo = currentQuestionIndex + 1;
    questionElement.innerHTML = `${questionNo}. ${currentQuestion.question}`;

    // Menampilkan Tombol Jawaban
    currentQuestion.answers.forEach(answer => {
        const button = document.createElement("button");
        button.innerHTML = answer.text;
        button.classList.add("btn");
        if (answer.correct) {
            button.dataset.correct = answer.correct;
        }
        button.addEventListener("click", selectAnswer);
        answerButtons.appendChild(button);
    });
}

// 5. Fungsi Membersihkan Tampilan Jawaban
function resetState() {
    nextButton.disabled = true;
    // Menghapus semua tombol jawaban yang ada
    while (answerButtons.firstChild) {
        answerButtons.removeChild(answerButtons.firstChild);
    }
}

// 6. Fungsi Memilih Jawaban
function selectAnswer(e) {
    const selectedBtn = e.target;
    const isCorrect = selectedBtn.dataset.correct === "true";

    if (isCorrect) {
        selectedBtn.classList.add("correct");
        score++;
    } else {
        selectedBtn.classList.add("incorrect");
    }

    // Menonaktifkan semua tombol setelah satu pilihan dibuat
    Array.from(answerButtons.children).forEach(button => {
        if (button.dataset.correct === "true") {
            button.classList.add("correct"); // Menandai jawaban yang benar
        }
        button.disabled = true; // Menonaktifkan tombol
    });

    nextButton.disabled = false;
}

// 7. Fungsi Menampilkan Skor Akhir
function showScore() {
    quizBox.classList.add("hide");
    resultBox.classList.remove("hide");
    scoreText.innerHTML = `Skor Anda: ${score} dari ${questions.length}`;

    // Mengganti teks tombol jika sudah selesai
    if (currentQuestionIndex >= questions.length) {
        nextButton.innerHTML = "Selesai";
    }
}

// 8. Fungsi Mengelola Tombol 'Selanjutnya'
function handleNextButton() {
    currentQuestionIndex++;
    if (currentQuestionIndex < questions.length) {
        showQuestion();
    } else {
        showScore();
    }
}

// 9. Event Listener untuk Tombol 'Selanjutnya'
nextButton.addEventListener("click", () => {
    if (currentQuestionIndex < questions.length) {
        handleNextButton();
    } else {
        startQuiz(); // Memulai ulang kuis jika sudah selesai
    }
});

// 10. Event Listener untuk Tombol 'Mulai Ulang Kuis'
restartButton.addEventListener("click", startQuiz);

// 11. Memanggil Fungsi untuk memulai kuis saat halaman dimuat
startQuiz();